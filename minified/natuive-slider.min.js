var scrollTimer=null;var slider;var original_scroll=0;var slider_animation=0;var touchmovex=0;var current_scroll=0;function scrollSlider(b){if(slider_animation){return}var a=b||window.event;el=a.target||a.srcElement;if(slider!=el){original_scroll=el.attributes.original_scroll}slider=el;clearTimeout(scrollTimer);current_scroll=slider.scrollLeft;scrollTimer=setTimeout(function(){if(current_scroll==slider.scrollLeft){slide(a,"snap")}},50)}function moveIndex(){removeClass(slider.parentNode.querySelector(".slider-nav a.active"),"active");var a=Math.round(slider.scrollLeft/slider.offsetWidth)+1;if(slider.parentNode.querySelector(".slider-nav").childNodes[a-1]){addClass(slider.parentNode.querySelector(".slider-nav").childNodes[a-1],"active")}}function slideEnd(){el.attributes.original_scroll=original_scroll=slider.scrollLeft;moveIndex();slider_animation=0;document.onkeyup=sliderKeyboard;forEach(".slider",function(b,a){b.onscroll=scrollSlider})}function slide(d,c){if(slider_animation){return}slider_animation=1;forEach(".slider",function(h,e){h.onscroll=null});var b=d||window.event;if(typeof b.srcElement=="unknown"){return}el=b.target||b.srcElement;stopEvent(b);var g=0;if(c=="index"){slider=el.parentNode.parentNode.querySelector(".slider");start=slider.scrollLeft;g=slider.children[thisIndex(el)].offsetLeft-start}if(c=="arrow"){slider=el.parentNode.querySelector(".slider");start=slider.scrollLeft;var f=thisIndex(slider.parentNode.querySelector("a.active"));if(hasClass(el,"left")){g=(f?slider.children[f-1].offsetLeft:0)-slider.children[f].offsetLeft}else{g=(slider.children.length-1>f)?slider.children[f+1].offsetLeft-slider.children[f].offsetLeft:0}}if(c=="snap"){slider=el;start=slider.scrollLeft;if(slider.scrollLeft>original_scroll){g=slider.offsetWidth-slider.scrollLeft%slider.offsetWidth;var f=Math.round((g+start)/slider.offsetWidth);if(f>=slider.children.length){f=slider.children.length-1}g=slider.children[f].offsetLeft-slider.scrollLeft}else{g=slider.scrollLeft%slider.offsetWidth-slider.offsetWidth;g=-1*(slider.offsetWidth+g);var f=Math.round((g+start)/slider.offsetWidth);if(f<0){f=0}g=-1*(start-slider.children[f].offsetLeft)}if(original_scroll==slider.scrollLeft){g=0}}if(!g){slideEnd();return}currentTime=0,increment=20;duration=400;var a=function(){currentTime+=increment;var e=Math.easeInOutQuad(currentTime,start,g,duration);slider.scrollLeft=e;if((currentTime<duration)){requestAnimFrame(a)}else{if(slideEnd&&typeof(slideEnd)==="function"){slideEnd()}}};a()}function sliderKeyboard(a){}function makeSlider(b){addClass(b,"slider");b.insertAdjacentHTML("beforebegin",'<div class="slider-container"></div>');container=b.previousSibling;container.insertAdjacentHTML("afterbegin",'<a class="slider-arrow left">←</a>'+b.outerHTML+'<a class="slider-arrow right">→</a><div class="slider-nav"></div>');container.nextSibling.outerHTML="";b=container.querySelector(".slider");b.style.overflowX="hidden";height_scroll=b.offsetHeight;b.style.overflowX="scroll";height_scroll=b.offsetHeight-height_scroll;var c=document.querySelector(".slider > *:nth-child(2)").offsetLeft-document.querySelector(".slider > *").offsetWidth;for(var a=0;a<b.children.length;a++){if(b.children[a].querySelector(".thumbnail")){slider_nav=b.parentNode.querySelector(".slider-nav");addClass(slider_nav,"thumbnails");addClass(slider_nav,"row");slider_nav.insertAdjacentHTML("beforeend",(!a?'<a class="active">':"<a>")+b.children[a].querySelector(".thumbnail").innerHTML+"</a>");slider_nav.style.marginTop=(-1*height_scroll)+"px"}else{container.querySelector(".slider-nav").insertAdjacentHTML("beforeend",(!a?'<a class="active">':"<a>")+(a+1)+"</a>");if(!a){container.style.height=(container.offsetHeight-height_scroll)+"px"}}container.querySelector(".slider-nav").lastChild.onclick=function(d){slide(d,"index")}}container.querySelector(".slider-arrow.left").onclick=container.querySelector(".slider-arrow.right").onclick=function(d){slide(d,"arrow")};b.onscroll=scrollSlider;b.attributes.original_scroll=0;return b}addEventHandler(window,"load",function(){document.onkeyup=sliderKeyboard;forEach(".slider",function(b,a){makeSlider(b)});slider=document.querySelector(".slider");window.onresize=function(){forEach(".slider",function(b,a){b.scrollLeft=0;moveIndex()})}});